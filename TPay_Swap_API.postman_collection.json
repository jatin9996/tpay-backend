{
	"info": {
		"_postman_id": "tpay-swap-api-collection",
		"name": "TPay Swap API - Sepolia Testnet",
		"description": "Complete collection for testing TPay Swap API endpoints with safety upgrades on Sepolia testnet",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "üåê Basic Endpoints",
			"item": [
				{
					"name": "Get Chain Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/dex/chain-info",
							"host": ["{{base_url}}"],
							"path": ["dex", "chain-info"]
						},
						"description": "Get information about the current connected blockchain network"
					},
					"response": []
				},
				{
					"name": "Get Supported Tokens",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/dex/tokens",
							"host": ["{{base_url}}"],
							"path": ["dex", "tokens"]
						},
						"description": "Get information about all supported tokens including name, symbol, and decimals"
					},
					"response": []
				},
				{
					"name": "Get Token Balance",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/dex/balance/{{token_address}}/{{user_address}}",
							"host": ["{{base_url}}"],
							"path": ["dex", "balance", "{{token_address}}", "{{user_address}}"],
							"variable": [
								{
									"key": "token_address",
									"value": "0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9",
									"description": "WETH address on Sepolia"
								},
								{
									"key": "user_address",
									"value": "0x742d35Cc6634C0532925a3b8D4C9Db96C4b4d8b6",
									"description": "Example user address"
								}
							]
						},
						"description": "Get the balance of a specific token for a given user address"
					},
					"response": []
				},
				{
					"name": "Get Operational Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/dex/operational-status",
							"host": ["{{base_url}}"],
							"path": ["dex", "operational-status"]
						},
						"description": "Get current operational status and limits for custodial swaps"
					},
					"response": []
				}
			]
		},
		{
			"name": "üí∞ Quote System Testing",
			"item": [
				{
					"name": "Get Quote - WETH to USDC",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{usdc_address}}\",\n    \"amountIn\": \"0.01\",\n    \"fee\": 3000\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/quote",
							"host": ["{{base_url}}"],
							"path": ["dex", "quote"]
						},
						"description": "Get price quote for WETH to USDC swap"
					},
					"response": []
				},
				{
					"name": "Get Quote - Different Fee Tier (500)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{usdc_address}}\",\n    \"amountIn\": \"0.01\",\n    \"fee\": 500\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/quote",
							"host": ["{{base_url}}"],
							"path": ["dex", "quote"]
						},
						"description": "Get quote with 0.05% fee tier"
					},
					"response": []
				},
				{
					"name": "Get Quote - High Fee Tier (10000)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{usdc_address}}\",\n    \"amountIn\": \"0.01\",\n    \"fee\": 10000\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/quote",
							"host": ["{{base_url}}"],
							"path": ["dex", "quote"]
						},
						"description": "Get quote with 1% fee tier"
					},
					"response": []
				}
			]
		},
		{
			"name": "üö® Validation Testing (Error Cases)",
			"item": [
				{
					"name": "Get Quote - Invalid Fee (2000)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{usdc_address}}\",\n    \"amountIn\": \"0.01\",\n    \"fee\": 2000\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/quote",
							"host": ["{{base_url}}"],
							"path": ["dex", "quote"]
						},
						"description": "Test fee validation - should return 400 error for invalid fee 2000"
					},
					"response": []
				},
				{
					"name": "Get Quote - Same Token (WETH to WETH)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{weth_address}}\",\n    \"amountIn\": \"0.01\",\n    \"fee\": 3000\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/quote",
							"host": ["{{base_url}}"],
							"path": ["dex", "quote"]
						},
						"description": "Test same token validation - should return 400 error for swapping token for itself"
					},
					"response": []
				},
				{
					"name": "Get Quote - Invalid Amount (0)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{usdc_address}}\",\n    \"amountIn\": \"0\",\n    \"fee\": 3000\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/quote",
							"host": ["{{base_url}}"],
							"path": ["dex", "quote"]
						},
						"description": "Test amount validation - should return 400 error for zero amount"
					},
					"response": []
				}
			]
		},
		{
			"name": "üîÑ Swap Population Testing (Non-Custodial)",
			"item": [
				{
					"name": "Populate Swap - WETH to USDC",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{usdc_address}}\",\n    \"amountIn\": \"0.01\",\n    \"recipient\": \"{{user_address}}\",\n    \"slippageTolerance\": 0.5,\n    \"fee\": 3000,\n    \"ttlSec\": 600\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/swap/populate",
							"host": ["{{base_url}}"],
							"path": ["dex", "swap", "populate"]
						},
						"description": "Get populated transaction for user to sign (non-custodial approach)"
					},
					"response": []
				},
				{
					"name": "Populate Swap - Different Fee (500)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{usdc_address}}\",\n    \"amountIn\": \"0.01\",\n    \"recipient\": \"{{user_address}}\",\n    \"slippageTolerance\": 0.5,\n    \"fee\": 500,\n    \"ttlSec\": 600\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/swap/populate",
							"host": ["{{base_url}}"],
							"path": ["dex", "swap", "populate"]
						},
						"description": "Test swap population with 0.05% fee tier"
					},
					"response": []
				}
			]
		},
		{
			"name": "‚ö†Ô∏è Validation Testing (Operational Limits)",
			"item": [
				{
					"name": "Populate Swap - High Slippage (10%)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{usdc_address}}\",\n    \"amountIn\": \"0.01\",\n    \"recipient\": \"{{user_address}}\",\n    \"slippageTolerance\": 10.0,\n    \"fee\": 3000,\n    \"ttlSec\": 600\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/swap/populate",
							"host": ["{{base_url}}"],
							"path": ["dex", "swap", "populate"]
						},
						"description": "Test slippage validation - should return 400 error for slippage above 5% (operational limit)"
					},
					"response": []
				},
				{
					"name": "Populate Swap - Short TTL (30s)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{usdc_address}}\",\n    \"amountIn\": \"0.01\",\n    \"recipient\": \"{{user_address}}\",\n    \"slippageTolerance\": 0.5,\n    \"fee\": 3000,\n    \"ttlSec\": 30\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/swap/populate",
							"host": ["{{base_url}}"],
							"path": ["dex", "swap", "populate"]
						},
						"description": "Test TTL validation - should return 400 error for TTL below 60 seconds (operational limit)"
					},
					"response": []
				},
				{
					"name": "Populate Swap - Long TTL (7200s)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{usdc_address}}\",\n    \"amountIn\": \"0.01\",\n    \"recipient\": \"{{user_address}}\",\n    \"slippageTolerance\": 0.5,\n    \"fee\": 3000,\n    \"ttlSec\": 7200\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/swap/populate",
							"host": ["{{base_url}}"],
							"path": ["dex", "swap", "populate"]
						},
						"description": "Test TTL validation - should return 400 error for TTL above 3600 seconds (operational limit)"
					},
					"response": []
				}
			]
		},
		{
			"name": "‚ö° Custodial Swap Testing (Optional)",
			"item": [
				{
					"name": "Execute Swap - WETH to USDC",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tokenIn\": \"{{weth_address}}\",\n    \"tokenOut\": \"{{usdc_address}}\",\n    \"amountIn\": \"0.001\",\n    \"recipient\": \"{{user_address}}\",\n    \"slippageTolerance\": 0.5,\n    \"fee\": 3000,\n    \"ttlSec\": 600\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/dex/swap",
							"host": ["{{base_url}}"],
							"path": ["dex", "swap"]
						},
						"description": "Execute swap transaction (custodial - requires funded private key and approvals)"
					},
					"response": []
				}
			]
		},
		{
			"name": "üîé Search",
			"item": [
				{
					"name": "Combined Search",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/search?q=WETH&limit=5",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"search"
							],
							"query": [
								{ "key": "q", "value": "WETH" },
								{ "key": "limit", "value": "5" }
							]
						},
						"description": "Combined search across tokens and pools"
					},
					"response": []
				},
				{
					"name": "Tokens-only Search",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/search/tokens?q=USD&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"search",
								"tokens"
							],
							"query": [
								{ "key": "q", "value": "USD" },
								{ "key": "limit", "value": "10" }
							]
						},
						"description": "Search only tokens (e.g., USDC/USDT)"
					},
					"response": []
				},
				{
					"name": "Pools-only Search",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/search/pools?q=WETH&limit=5",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"search",
								"pools"
							],
							"query": [
								{ "key": "q", "value": "WETH" },
								{ "key": "limit", "value": "5" }
							]
						},
						"description": "Search only pools (token symbol match in token0/token1)"
					},
					"response": []
				},
				{
					"name": "Empty State (no query)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/search",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"search"
							]
						},
						"description": "Returns default suggestions when no `q` is provided"
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Set default values for variables if not already set",
					"if (!pm.environment.get('base_url')) {",
					"    pm.environment.set('base_url', 'http://localhost:3001');",
					"}",
					"if (!pm.environment.get('weth_address')) {",
					"    pm.environment.set('weth_address', '0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9');",
					"}",
					"if (!pm.environment.get('usdc_address')) {",
					"    pm.environment.set('usdc_address', '0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238');",
					"}",
					"if (!pm.environment.get('user_address')) {",
					"    pm.environment.set('user_address', '0x742d35Cc6634C0532925a3b8D4C9Db96C4b4d8b6');",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3001",
			"type": "string"
		},
		{
			"key": "weth_address",
			"value": "0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9",
			"type": "string"
		},
		{
			"key": "usdc_address",
			"value": "0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",
			"type": "string"
		},
		{
			"key": "user_address",
			"value": "0x742d35Cc6634C0532925a3b8D4C9Db96C4b4d8b6",
			"type": "string"
		}
	]
}
